#include "mbed.h"
#include "SongPlayer.h"

// Song test program - plays a song using PWM and timer interrupts
// for documentation see http://mbed.org/users/4180_1/notebook/using-a-speaker-for-audio-output/
// can be used to play a song, if you have the notes and durations
// for musical note frequencies see http://en.wikipedia.org/wiki/Piano_key_frequencies

//Set up notes and durations for sample song to play
// A 0.0 duration note at end terminates song play
float note[19]= {349.2282,391.9954,349.2282,311.1270,311.1270,311.1270,349.2282,391.9954,391.9954,
                 391.9954,349.2282,311.1270,349.2282,391.9954,349.2282,311.1270,293.6648,311.1270,0.0
                };
float duration[19]= {0.167,0.333,0.167,0.333,0.167,0.333,0.167,0.333,0.167,
                     0.167,0.167,0.167,0.167,0.167,0.167,0.333,0.167,0.833, 0.0
                    };

DigitalOut led1(LED1);
int main()
{
// setup instance of new SongPlayer class, mySpeaker using pin 26
// the pin must be a PWM output pin
    SongPlayer mySpeaker(p26);
// Start song and return once playing starts
    mySpeaker.PlaySong(note,duration);
    // loops forever while song continues to play to end using interrupts
    while(1) {
        led1 = !led1;
        wait(.1);
    }
}

